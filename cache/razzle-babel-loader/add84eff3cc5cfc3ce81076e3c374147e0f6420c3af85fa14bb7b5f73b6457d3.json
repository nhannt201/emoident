{"ast":null,"code":"import express from \"express\";\nimport cors from \"cors\";\nimport bodyParser from \"body-parser\";\nimport diagnose from \"./api/diagnose\";\nimport { renderApp } from \"./renderApp\";\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\nlogger.info('RAZZLE_PUBLIC_DIR', process.env.RAZZLE_PUBLIC_DIR);\nconst server = express();\nserver.use(cors('*')).disable('x-powered-by').use(bodyParser.json({\n  limit: '5mb'\n})).use(bodyParser.urlencoded({\n  extended: true\n})).use('/api', diagnose).get('/*', (req, res, next) => {\n  try {\n    const {\n      context,\n      html\n    } = renderApp(req, res);\n    if (context.url) {\n      res.redirect(context.url);\n    } else {\n      console.log(html, 'htmlzzz');\n      res.status(context.statusCode || 200).send(html);\n    }\n  } catch (error) {\n    next(error);\n  }\n});\nexport default server;","map":{"version":3,"names":["express","cors","bodyParser","diagnose","renderApp","assets","require","process","env","RAZZLE_ASSETS_MANIFEST","logger","info","RAZZLE_PUBLIC_DIR","server","use","disable","json","limit","urlencoded","extended","get","req","res","next","context","html","url","redirect","console","log","status","statusCode","send","error"],"sources":["D:/LAPTRINH/emoident/src/server.js"],"sourcesContent":["import express from \"express\";\r\nimport cors from \"cors\";\r\nimport bodyParser from \"body-parser\";\r\nimport diagnose from \"./api/diagnose\";\r\nimport {renderApp} from \"./renderApp\";\r\n\r\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\r\n\r\nlogger.info('RAZZLE_PUBLIC_DIR', process.env.RAZZLE_PUBLIC_DIR);\r\n\r\nconst server = express();\r\nserver\r\n    .use(cors('*'))\r\n    .disable('x-powered-by')\r\n    .use(bodyParser.json({ limit: '5mb' }))\r\n    .use(bodyParser.urlencoded({ extended: true }))\r\n    .use('/api', diagnose)\r\n    .get('/*',  (req, res, next) => {\r\n        try {\r\n            const { context, html } = renderApp(req, res);\r\n            if (context.url) {\r\n                res.redirect(context.url);\r\n            } else {\r\n                console.log(html, 'htmlzzz')\r\n                res.status(context.statusCode || 200).send(html);\r\n            }\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n});\r\n\r\n\r\nexport default server;\r\n\r\n\r\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,UAAU,MAAM,aAAa;AACpC,OAAOC,QAAQ,MAAM,gBAAgB;AACrC,SAAQC,SAAS,QAAO,aAAa;AAErC,MAAMC,MAAM,GAAGC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,sBAAsB,CAAC;AAE1DC,MAAM,CAACC,IAAI,CAAC,mBAAmB,EAAEJ,OAAO,CAACC,GAAG,CAACI,iBAAiB,CAAC;AAE/D,MAAMC,MAAM,GAAGb,OAAO,CAAC,CAAC;AACxBa,MAAM,CACDC,GAAG,CAACb,IAAI,CAAC,GAAG,CAAC,CAAC,CACdc,OAAO,CAAC,cAAc,CAAC,CACvBD,GAAG,CAACZ,UAAU,CAACc,IAAI,CAAC;EAAEC,KAAK,EAAE;AAAM,CAAC,CAAC,CAAC,CACtCH,GAAG,CAACZ,UAAU,CAACgB,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC,CAC9CL,GAAG,CAAC,MAAM,EAAEX,QAAQ,CAAC,CACrBiB,GAAG,CAAC,IAAI,EAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC5B,IAAI;IACA,MAAM;MAAEC,OAAO;MAAEC;IAAK,CAAC,GAAGrB,SAAS,CAACiB,GAAG,EAAEC,GAAG,CAAC;IAC7C,IAAIE,OAAO,CAACE,GAAG,EAAE;MACbJ,GAAG,CAACK,QAAQ,CAACH,OAAO,CAACE,GAAG,CAAC;IAC7B,CAAC,MAAM;MACHE,OAAO,CAACC,GAAG,CAACJ,IAAI,EAAE,SAAS,CAAC;MAC5BH,GAAG,CAACQ,MAAM,CAACN,OAAO,CAACO,UAAU,IAAI,GAAG,CAAC,CAACC,IAAI,CAACP,IAAI,CAAC;IACpD;EACJ,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACZV,IAAI,CAACU,KAAK,CAAC;EACf;AACR,CAAC,CAAC;AAGF,eAAepB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}