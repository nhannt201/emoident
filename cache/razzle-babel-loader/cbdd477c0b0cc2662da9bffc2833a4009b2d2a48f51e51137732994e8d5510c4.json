{"ast":null,"code":"var _jsxFileName = \"D:\\\\LAPTRINH\\\\emoident\\\\src\\\\server.js\";\nvar __jsx = React.createElement;\nimport express from \"express\";\nimport cors from \"cors\";\nimport bodyParser from \"body-parser\";\nimport diagnose from \"./api/diagnose\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter } from \"react-router-dom/server\";\nimport App from \"./App\";\nimport React from \"react\";\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\nlogger.info('RAZZLE_PUBLIC_DIR', process.env.RAZZLE_PUBLIC_DIR);\nconst cssLinksFromAssets = (assets, entrypoint) => assets[entrypoint] ? assets[entrypoint].css ? assets[entrypoint].css.map(asset => `<link rel=\"stylesheet\" href=\"${asset}\">`).join('') : '' : '';\n\n// eslint-disable-next-line no-shadow\nconst jsScriptTagsFromAssets = (assets, entrypoint, ...extra) => assets[entrypoint] ? assets[entrypoint].js ? assets[entrypoint].js.map(asset => `<script src=\"${asset}\" ${extra.join(' ')}></script>`).join('') : '' : '';\nconst renderApp = (req, res) => {\n  const context = {};\n  const markup = renderToString(__jsx(StaticRouter, {\n    context: context,\n    location: req.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, __jsx(App, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  })));\n  const html = `<!doctype html>\n  <html lang=\"\">\n  <head>\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n      <meta charset=\"utf-8\" />\n      <title>Emoident - Thang đo cảm xúc</title>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n      <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"/>\n      <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin/>\n      <link href=\"https://fonts.googleapis.com/css2?family=Inter&display=swap\" rel=\"stylesheet\"/>\n            ${cssLinksFromAssets(assets, 'client')}\n\n  </head>\n  <body>\n      <div id=\"root\">${markup}</div>\n            ${jsScriptTagsFromAssets(assets, 'client', 'defer', 'crossorigin')}\n\n  </body>\n</html>`;\n  return {\n    context,\n    html\n  };\n};\nconst server = express();\nserver.use(cors('*')).disable('x-powered-by').use(bodyParser.json({\n  limit: '5mb'\n})).use(bodyParser.urlencoded({\n  extended: true\n})).use('/api', diagnose).get('/*', (req, res, next) => {\n  try {\n    const {\n      context,\n      html\n    } = renderApp(req, res);\n    if (context.url) {\n      res.redirect(context.url);\n    } else {\n      console.log(html, 'htmlzzz');\n      res.status(context.statusCode || 200).send(html);\n    }\n  } catch (error) {\n    next(error);\n  }\n});\nexport default server;","map":{"version":3,"names":["express","cors","bodyParser","diagnose","renderToString","StaticRouter","App","React","assets","require","process","env","RAZZLE_ASSETS_MANIFEST","logger","info","RAZZLE_PUBLIC_DIR","cssLinksFromAssets","entrypoint","css","map","asset","join","jsScriptTagsFromAssets","extra","js","renderApp","req","res","context","markup","__jsx","location","url","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","html","server","use","disable","json","limit","urlencoded","extended","get","next","redirect","console","log","status","statusCode","send","error"],"sources":["D:/LAPTRINH/emoident/src/server.js"],"sourcesContent":["import express from \"express\";\r\nimport cors from \"cors\";\r\nimport bodyParser from \"body-parser\";\r\nimport diagnose from \"./api/diagnose\";\r\nimport {renderToString} from \"react-dom/server\";\r\nimport {StaticRouter} from \"react-router-dom/server\";\r\nimport App from \"./App\";\r\nimport React from \"react\";\r\n\r\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\r\n\r\nlogger.info('RAZZLE_PUBLIC_DIR', process.env.RAZZLE_PUBLIC_DIR);\r\n\r\nconst cssLinksFromAssets = (assets, entrypoint) =>\r\n    assets[entrypoint]\r\n        ? assets[entrypoint].css\r\n            ? assets[entrypoint].css\r\n                .map((asset) => `<link rel=\"stylesheet\" href=\"${asset}\">`)\r\n                .join('')\r\n            : ''\r\n        : '';\r\n\r\n// eslint-disable-next-line no-shadow\r\nconst jsScriptTagsFromAssets = (assets, entrypoint, ...extra) =>\r\n    assets[entrypoint]\r\n        ? assets[entrypoint].js\r\n            ? assets[entrypoint].js\r\n                .map((asset) => `<script src=\"${asset}\" ${extra.join(' ')}></script>`)\r\n                .join('')\r\n            : ''\r\n        : '';\r\n\r\nconst renderApp = (req, res) => {\r\n    const context = {};\r\n    const markup = renderToString(\r\n        <StaticRouter context={context} location={req.url}>\r\n            <App />\r\n        </StaticRouter>\r\n    );\r\n    const html = `<!doctype html>\r\n  <html lang=\"\">\r\n  <head>\r\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n      <meta charset=\"utf-8\" />\r\n      <title>Emoident - Thang đo cảm xúc</title>\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n      <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"/>\r\n      <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin/>\r\n      <link href=\"https://fonts.googleapis.com/css2?family=Inter&display=swap\" rel=\"stylesheet\"/>\r\n            ${cssLinksFromAssets(assets, 'client')}\r\n\r\n  </head>\r\n  <body>\r\n      <div id=\"root\">${markup}</div>\r\n            ${jsScriptTagsFromAssets(assets, 'client', 'defer', 'crossorigin')}\r\n\r\n  </body>\r\n</html>`;\r\n    return { context, html };\r\n};\r\n\r\n\r\n\r\nconst server = express();\r\nserver\r\n    .use(cors('*'))\r\n    .disable('x-powered-by')\r\n    .use(bodyParser.json({ limit: '5mb' }))\r\n    .use(bodyParser.urlencoded({ extended: true }))\r\n    .use('/api', diagnose)\r\n    .get('/*',  (req, res, next) => {\r\n        try {\r\n            const { context, html } = renderApp(req, res);\r\n            if (context.url) {\r\n                res.redirect(context.url);\r\n            } else {\r\n                console.log(html, 'htmlzzz')\r\n                res.status(context.statusCode || 200).send(html);\r\n            }\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n});\r\n\r\n\r\nexport default server;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}